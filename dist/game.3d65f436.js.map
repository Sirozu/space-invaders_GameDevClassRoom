{"version":3,"sources":["src/sprite.js","src/config.js","src/screen.js","src/gameObject.js","src/bullet.js","src/enemy.js","src/inputHandler.js","src/gun.js","src/shield.js","src/game.js"],"names":["Sprite","sp","x","y","w","h","canvas","document","getElementById","ctx","getContext","width","height","SHIPS_IN_LINE","WIDTH_CANVAS","HEIGHT_CANVAS","image","Image","src","assetPath","ENEMY_SPRITERS","GUN_SPRITERS","GUN_BULLET_SPRITERS","ENEMY_BULLET_SPRITERS","SHIELD_SPRITERS","Screen","rect","fillStyle","fill","gun","bullets","enemyFleet","step","shield1","shield2","shield3","shield4","drawBar","draw","forEach","bullet","ships","ship","stepGap","beginPath","moveTo","lineTo","strokeStyle","stroke","closePath","drawLifeBar","drawScoreBar","score","spr","spriters","i","life","drawImage","font","textBaseline","fillText","txt","GameObject","dx","dy","curSprite","changeSprite","length","Bullet","type","targets","self","result","target","destroy","isAlive","splice","shield","Enemy","rateDestroy","fired","Math","floor","random","push","EnemyLine","count","space","enemies","enemy","stepToDown","numDestroyedShips","fire","EnemyFleet","lines","sort","a","b","startCountShips","stepDelay","line","concat","checkEdges","enemyLine","numDestroyed","num","j","arr","leftEmpty","rightEmpty","updateWidth","enemySpriters","size","enemyLines","lLines","lSpriters","hSprite","InputHandler","down","pressed","addEventListener","event","keyCode","code","Object","keys","Gun","isMoving","stop","moving","Shield","startGameLoop","screen","input","round","makeLines","commandController","startCommandController","isDown","movingLeft","movingRight","isPressed","loop","message","clearAll","clear","isHitShield","isHit","drawAll","requestAnimationFrame","setTimeout","wait","isAnyKeyPressed","gameLoop"],"mappings":"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","file":"game.3d65f436.js","sourceRoot":"..","sourcesContent":["export default class Sprite {\n  constructor(sp, x, y, w, h) {\n    this.sp = sp;\n  \tthis.x = x;\n  \tthis.y = y;\n  \tthis.w = w;\n  \tthis.h = h;\n  }\n}\n","import Sprite from './sprite';\nimport assetPath from '../assets/invaders.png'\n\nexport const canvas = document.getElementById(\"cnvs\");\n\nexport var ctx = canvas.getContext('2d');\n\nctx.canvas.width  = 600//window.innerWidth;\nctx.canvas.height = 500//window.innerHeight;\n\nexport const SHIPS_IN_LINE = 10;\n\nexport const WIDTH_CANVAS = canvas.width;\n\nexport const HEIGHT_CANVAS = canvas.height;\n\nvar image = new Image();\nimage.src = assetPath;\n\n// Получаем массив спрайтов вражеских кораблей\nexport const ENEMY_SPRITERS = [\n  [new Sprite(image, 22, 0, 16, 16), new Sprite(image, 22, 16, 16, 16)],\n  [new Sprite(image, 0, 0, 22, 16), new Sprite(image, 0, 16, 22, 16)],\n  [new Sprite(image, 38, 0, 24, 16), new Sprite(image, 38, 16, 24, 16)]\n];\n// Получаем массив спрайтов пушки\nexport const GUN_SPRITERS = [new Sprite(image, 62, 0, 22, 16)];\n// Получаем массив спрайтов снаряда пушки\nexport const GUN_BULLET_SPRITERS = [new Sprite(image, 73, 0, 1, 3)];\n// Получаем массив спрайтов снаряда вражеских кораблей\nexport const ENEMY_BULLET_SPRITERS = [new Sprite(image, 50, 0, 1, 3)];\n// Получаем массив спрайтов щита \nexport const SHIELD_SPRITERS = [new Sprite(image, 84, 0, 42, 30)]\n","import { WIDTH_CANVAS, HEIGHT_CANVAS} from './config';\nexport default class Screen {\n  constructor (ctx) {\n    this.ctx = ctx;\n    this.w = WIDTH_CANVAS;\n    this.h = HEIGHT_CANVAS;\n  }\n\n  // функия полной очистки экрана\n  clearAll () {\n    this.ctx.rect(0, 0, this.w, this.h);\n    this.ctx.fillStyle = 'black';\n    this.ctx.fill();\n  }\n  drawAll (gun, bullets, enemyFleet, step, shield1, shield2, shield3, shield4) {\n    this.drawBar(gun);\n    gun.draw();\n    bullets.forEach(function (bullet) {\n      bullet.draw();\n    });\n    enemyFleet.ships.forEach(function (ship) {\n      ship.draw((step - 20) % enemyFleet.stepGap === 0);\n    });\n\n    shield1.draw();\n    shield2.draw();\n    shield3.draw();\n    shield4.draw();\n  }\n  clear (x, y, w, h) {\n    this.ctx.rect(x, y, w, h);\n    this.ctx.fillStyle = 'black';\n    this.ctx.fill();\n  }\n  // отрисовка бара\n  drawBar (gun) {\n    this.ctx.beginPath();\n    this.ctx.moveTo(0, this.h - 32);\n    this.ctx.lineTo(this.w, this.h - 32);\n    this.ctx.strokeStyle = 'red';\n    this.ctx.stroke();\n    this.ctx.closePath();\n\n    if (gun) {\n      this.drawLifeBar(gun);\n      this.drawScoreBar(gun.score);\n    }\n  }\n  // отрисовка жизней\n  drawLifeBar (gun) {\n    let spr = gun.spriters[0];\n\n    let x = 0;\n\n    let y = this.h - 32 + (32 - 16) / 2;\n\n    let space = 8;\n\n    let w = 22 * 3 + space * 3;\n\n    this.ctx.beginPath();\n    this.ctx.rect(x, y, w, this.h);\n    this.ctx.fillStyle = 'black';\n    this.ctx.fill();\n    this.ctx.closePath();\n\n    for (let i = 0; i < gun.life; i++) {\n      this.ctx.drawImage(spr.sp, spr.x, spr.y, spr.w, spr.h, x + spr.w * i + space * (i + 1), y, spr.w, spr.h);\n    }\n  }\n  // отрисовка очков\n  drawScoreBar (score) {\n    let x = this.w - 100;\n\n    let y = this.h - 32 + (32 - 16) / 2;\n\n    this.ctx.beginPath();\n    this.ctx.rect(x, y, this.w, this.h);\n    this.ctx.fillStyle = 'black';\n    this.ctx.fill();\n    this.ctx.closePath();\n\n    this.ctx.beginPath();\n    this.ctx.font = '16px serif';\n    this.ctx.textBaseline = 'top';\n    this.ctx.fillStyle = 'red';\n    this.ctx.fillText(`SCORE  ${score}`, x, y);\n    this.ctx.closePath();\n  }\n  // сообщение\n  message (txt, x, y = this.h / 2 - 8) {\n    this.ctx.beginPath();\n    this.ctx.font = '16px serif';\n    this.ctx.textBaseline = 'top';\n    this.ctx.fillStyle = 'red';\n    this.ctx.fillText(txt, x, y);\n    this.ctx.closePath();\n  }\n}\n","export default class GameObject {\n  constructor (ctx, spriters = [], x = 0, y = 0, dx = 4, dy = 16) {\n    this.ctx = ctx;\n    this.spriters = spriters;\n    this.x = x;\n    this.y = y;\n    this.dx = dx;\n    this.dy = dy;\n    this.curSprite = 0;\n\n    if (spriters[0]) {\n      this.w = spriters[0].w;\n      this.h = spriters[0].h;\n    }\n  }\n\n  clear () {\n    this.ctx.beginPath();\n    this.ctx.rect(this.x, this.y, this.w, this.h);\n    this.ctx.fillStyle = 'black';\n    this.ctx.fill();\n    this.ctx.closePath();\n  }\n\n  draw (changeSprite = false) {\n    var spr = this.spriters[this.curSprite];\n\n    this.ctx.drawImage(spr.sp, spr.x, spr.y, spr.w, spr.h, this.x, this.y, this.w, this.h);\n\n    if (changeSprite) {\n      if (this.curSprite < this.spriters.length - 1) this.curSprite += 1;\n      else this.curSprite = 0;\n    }\n  }\n}","import GameObject from './gameObject';\n// type - мы ли не мы)\nexport default class Bullet extends GameObject \n{\n  constructor (ctx, spriters, x = 0, y = 0, dy = 3, type = 'gun') \n  {\n    super(ctx, spriters, x, y, 0, dy);\n    this.type = type;\n  }\n\n  step () \n  {\n    this.y += this.dy;\n  }\n\n  isHit (targets, gun) \n  {\n    var self = this;\n\n    var result = false;\n\n    targets.forEach(function (target, i) {\n      // Если попали в цель уничтожаем ее, если она мертва больше не отслеживаем ее\n      if (target.x <= self.x + self.w \n        && target.x + target.w >= self.x \n        && target.y <= self.y + self.h \n        && target.y + target.h >= self.y)\n        {\n          // Если стреляла пушка начислем ей очки\n          if (self.type === 'gun') \n          {\n            gun.score += target.score;\n          }\n\n          target.destroy();\n\n          if (!target.isAlive) \n            targets.splice(i, 1);\n            \n          return (result = true);\n      }\n    });\n    return result;\n  }\n\n  isHitShield (shield) \n  {\n    var bullet = this;\n\n    // Если попали в цель уничтожаем ее, если она мертва больше не отслеживаем ее\n    if  (shield.x <= bullet.x + bullet.w \n      && shield.x + shield.w >= bullet.x \n      && shield.y <= bullet.y + bullet.h \n      && shield.y + shield.h >= bullet.y)\n      {\n\n        shield.destroy();\n\n        if (!shield.isAlive) \n        {\n          shield.x = 5000\n          shield.y = 5000\n        }\n          \n        return true;\n      }\n\n    return false;\n  }\n}","import { WIDTH_CANVAS, ENEMY_BULLET_SPRITERS } from './config';\nimport GameObject from './gameObject';\nimport Bullet from './bullet';\n\nclass Enemy extends GameObject {\n  constructor (ctx, spriters, x = 0, y = 0, score = 10, dx = -4, dy = 16) {\n    super(ctx, spriters, x, y, dx, dy);\n    this.isAlive = true;\n    this.score = score;\n  }\n  // Шаг корабря\n  step (dx) {\n    if (this.isAlive) {\n      this.x += dx;\n    }\n  }\n  // Спуск коробля в низ\n  // Используется при достижении флотом левой границы.\n  stepToDown () {\n    if (this.isAlive) {\n      this.y += this.dy;\n    }\n  }\n  // Корабль по команде стреляет с некой вероятностью\n  fire (bullets, rateDestroy) {\n    // вероятность что выстрелит\n    var fired = !Math.floor(Math.random() * (3 + rateDestroy));\n    if (this.isAlive && fired) {\n      // Стреляет, добавляет полю в массив пуль (для их обработки в цикле игры)\n      bullets.push(\n        new Bullet(this.ctx, ENEMY_BULLET_SPRITERS, this.x + this.w / 2,\n          this.y + this.h, 1, 'enemy')\n      );\n    }\n  }\n  // Корабль уничтожен\n  destroy () {\n    this.isAlive = false;\n  }\n}\n\nclass EnemyLine extends GameObject {\n  constructor (ctx, spriters, count, y = 0, score = 10, space = 10) {\n    super(ctx, spriters, 0, y);\n    this.count = count;\n    this.space = space + 24 - spriters[0].w;\n    this.w = spriters[0].w * count + this.space * (count - 1);\n    this.h = spriters[0].h;\n    this.enemies = [];\n\n    for (let i = 0; i < count; i++) {\n      let x = WIDTH_CANVAS - this.spriters[0].w * (this.count - i) - this.space * (this.count - i - 1);\n      // Создаем корабли линни, каждый корабль будет иметь координаты в соответствии с его номером в линни\n      this.enemies.push(new Enemy(ctx, spriters, x, y, score));\n    }\n  }\n  // Пересчитывем длину линии\n  updateWidth () {\n    this.w = this.spriters[0].w * this.enemies.length + this.space * (this.enemies.length - 1);\n  }\n\n  step (dx) {\n    this.enemies.forEach(function (enemy, i) {\n      if (enemy.isAlive) enemy.step(dx);\n    });\n  }\n\n  stepToDown () {\n    this.enemies.forEach(function (enemy, i) {\n      if (enemy.isAlive) enemy.stepToDown();\n    });\n  }\n\n  fire (bullets, rateDestroy) {\n    let numDestroyedShips = [];\n\n    this.enemies.forEach(function (enemy, i) {\n      if (enemy.isAlive) {\n        enemy.fire(bullets, rateDestroy);\n      } else {\n        numDestroyedShips.push(i);\n      }\n    });\n\n    return numDestroyedShips;\n  }\n}\n\nexport default class EnemyFleet extends GameObject {\n  constructor (ctx, lines, y = 0, dx = -4, dy = 16, space = 8) {\n    super(ctx, [], 0, y, dx, dy);\n    this.lines = lines;\n    this.space = space;\n    this.w = lines.sort((a, b) => b.w - a.w)[0].w;\n    this.h = lines.length * lines[0].h + (lines.length - 1) * space;\n    this.x = WIDTH_CANVAS - this.w;\n    this.ships = [];\n    this.startCountShips = 0;\n    this.stepDelay = 32//64;\n\n    let self = this;\n    this.lines.sort((a, b) => a.y - b.y);\n\n    this.lines.forEach(function (line) {\n      self.ships = self.ships.concat(line.enemies);\n    });\n    this.startCountShips = this.ships.length;\n  }\n  // Создает массив линий вражеского флота, enemySpriters - массив спрайтов для линий\n  // count - количество повторений линий (созданных из enemySpriters)\n  // size - размер кораблей в линии\n  static makeLines (ctx, enemySpriters, count = 1, size = 10) {\n    let enemyLines = [];\n\n    let hSprite = 16;\n\n    for (let j = 0; j < count; j++) {\n      // Каждый спрайт отдельная линия\n      enemySpriters.forEach(function (spriters, i) {\n        let lLines = enemyLines.length;\n\n        let lSpriters = enemySpriters.length;\n\n        let y = lLines ? enemyLines[lLines - 1].y + hSprite + hSprite / 2 : 0;\n        enemyLines.push(new EnemyLine(ctx, spriters, size, y, 10 * (lSpriters - i)));\n      });\n    }\n\n    return enemyLines;\n  }\n\n  step () {\n    let self = this;\n\n    // Проверим крайние стобцы при необходимоти обрежем флот\n    this.checkEdges();\n    // Если не дошли до края то идем, если дошли то спускаемся\n    if (this.dx + this.x + this.w > WIDTH_CANVAS || this.dx + this.x < 0) {\n      this.dx = -this.dx;\n      this.stepToDown();\n    } else {\n      this.x += this.dx;\n      this.lines.forEach(function (enemyLine, i) {\n        enemyLine.step(self.dx);\n      });\n    }\n  }\n\n  stepToDown () {\n    this.y += this.dy;\n    this.lines.forEach(function (enemyLine, i) {\n      enemyLine.stepToDown();\n    });\n  }\n  // Флот открывает огонь из кораблейнаходящихся в нижней позиции по каждому столбу\n  fire (bullets) {\n    // Отдаем приказ нижней линии открыть огонь\n    let i = this.lines.length - 1;\n\n    let numDestroyed = this.lines[i].fire(bullets, this.rateDestroy);\n\n    // Линия полностью уничтожена\n    if (numDestroyed.length === this.lines[i].enemies.length) {\n      this.lines.splice(i, 1);\n      this.h = this.lines.length * this.lines[0].h + (this.lines.length - 1) * this.space;\n    }\n\n    let self = this;\n\n    i--;\n    // Если в линии есть потери то, приказ открыть огонь передается\n    // соотвествующим кораблям верхней линии.\n    // И так д тех пор пока приказ не будет выполнен, либо не закончатся линии флота\n    while (i >= 0 && numDestroyed.length !== 0) {\n      numDestroyed.forEach(function (num, j, arr) {\n        let enemy = self.lines[i].enemies[num];\n        // Если корабль жив то командуем огонь, и убираем его номер из массива не выполнивших приказ.\n        if (enemy.isAlive) {\n          enemy.fire(bullets, self.rateDestroy);\n          arr.splice(j, 1);\n        }\n      });\n      i--;\n    }\n  }\n\n  get stepGap () {\n    return Math.floor(this.stepDelay / this.rateDestroy);\n  }\n\n  get rateDestroy () {\n    return Math.floor(this.startCountShips / this.ships.length);\n  }\n  // Проверка и обрезка краев\n  checkEdges () {\n    let leftEmpty = true;\n\n    let rightEmpty = true;\n\n    this.lines.forEach(function (line) {\n      if (line.enemies[0].isAlive) leftEmpty = false;\n      if (line.enemies[line.enemies.length - 1].isAlive) rightEmpty = false;\n    });\n    // Если первый столбец потерял все корабли, удалим его\n    if (leftEmpty) {\n      this.lines.forEach(function (line) {\n        line.enemies.splice(0, 1);\n        line.updateWidth();\n      });\n      this.x += this.lines[0].enemies[0].w + this.lines[0].space;\n      this.w -= (this.lines[0].enemies[0].w + this.lines[0].space);\n    }\n    // Если последний столбец потерял все корабли, удалим его\n    if (rightEmpty) {\n      this.lines.forEach(function (line) {\n        line.enemies.splice(line.enemies.length - 1, 1);\n        line.updateWidth();\n      });\n      this.w -= (this.lines[0].enemies[0].w + this.lines[0].space);\n    }\n  }\n}\n","export default class InputHandler {\n  constructor () {\n    this.down = {};\n    this.pressed = {};\n\n    var self = this;\n\n    document.addEventListener('keydown', function (event) {\n      self.down[event.keyCode] = true;\n    });\n\n    document.addEventListener('keyup', function (event) {\n      delete self.down[event.keyCode];\n      delete self.pressed[event.keyCode];\n    });\n  }\n  // Если клавиша все еще нажата\n  isDown (code) {\n    return this.down[code];\n  }\n  isPressed (code) \n  {\n    if (this.pressed[code]) \n    {\n      return false;\n    } \n    else \n    {\n      if (this.down[code]) \n        return (this.pressed[code] = true);\n    }\n    return false;\n  }\n  // Нажата ли какая либо кнопка\n  isAnyKeyPressed () {\n    return !!Object.keys(this.down).length;\n  }\n}\n","import { WIDTH_CANVAS, HEIGHT_CANVAS, GUN_BULLET_SPRITERS} from './config';\nimport GameObject from './gameObject';\nimport Bullet from './bullet';\n\nexport default class Gun extends GameObject {\n  constructor (ctx, spriters, x = (WIDTH_CANVAS - 22) / 2, y = HEIGHT_CANVAS - 16, dx = 3, life = 3) {\n    super(ctx, spriters, x, y, dx);\n    this.w = 22;\n    this.h = 16;\n    this.isMoving = false;\n    this.life = life;\n    this.score = 0;\n  }\n\n  stop () {\n    this.isMoving = false;\n  }\n\n  moving (dx) {\n    if (this.isMoving && (this.x + dx >= 0 && this.x + dx <= WIDTH_CANVAS - 22)) {\n      this.x += dx;\n    } else {\n      this.stop();\n    }\n  }\n\n  movingLeft () {\n    this.isMoving = true;\n    this.moving(this.dx * -1);\n  }\n\n  movingRight () {\n    this.isMoving = true;\n    this.moving(this.dx);\n  }\n\n  fire (bullets) {\n    bullets.push(new Bullet(this.ctx, GUN_BULLET_SPRITERS, this.x + 11, this.y - 3, -1));\n  }\n\n  get isAlive () {\n    return this.life > 0;\n  }\n\n  destroy () {\n    this.life -= 1;\n  }\n}","import { WIDTH_CANVAS, HEIGHT_CANVAS, SHIELD_SPRITERS} from './config';\r\nimport GameObject from './gameObject';\r\nimport Bullet from './bullet';\r\n\r\nexport default class Shield extends GameObject {\r\n  constructor (ctx, spriters, x = WIDTH_CANVAS/ 2, y = HEIGHT_CANVAS/2 , dx = 0, life = 2) {\r\n    super(ctx, spriters, x, y, dx);\r\n    this.w = 42;\r\n    this.h = 30;\r\n    this.life = life;\r\n  }\r\n\r\n  get isAlive () {\r\n    return this.life > 0;\r\n  }\r\n\r\n  destroy () {\r\n    this.life -= 1;\r\n    this.h = 25;\r\n  }\r\n}","import { ctx,  ENEMY_SPRITERS, GUN_SPRITERS, SHIELD_SPRITERS} from './config';\nimport Screen from './screen';\nimport EnemyFleet from './enemy';\nimport InputHandler from './inputHandler';\nimport Gun from './gun';\nimport Shield from './shield';\n\nfunction startGameLoop (screen, input) {\n  let step = 0;\n\n  let round = 1;\n  // Создаем флот\n  let enemyFleet = new EnemyFleet(ctx, EnemyFleet.makeLines(ctx, ENEMY_SPRITERS, round, 10));\n  // Получаем пушку\n  let gun = new Gun(ctx, GUN_SPRITERS, (screen.w - 22) / 2, screen.h - 32 - 16 - 4);\n  gun.draw();\n\n  let shield1 = new Shield(ctx, SHIELD_SPRITERS, screen.w - 100, screen.h - 150);\n  let shield2 = new Shield(ctx, SHIELD_SPRITERS, screen.w - 250, screen.h - 150);\n  let shield3 = new Shield(ctx, SHIELD_SPRITERS, screen.w - 450, screen.h - 150);\n  let shield4 = new Shield(ctx, SHIELD_SPRITERS, screen.w - 570, screen.h - 150);\n  shield1.draw();\n  shield2.draw();\n  shield3.draw();\n  shield4.draw();\n\n  // Инииализируем массив пуль\n  let bullets = [];\n  // Иницализируем обработчик команд\n  let commandController = startCommandController(input);\n\n  // Обработчик команд игрока\n  function startCommandController (input) {\n    return () => {\n      if (input.isDown(37)) gun.movingLeft();\n      if (input.isDown(39)) gun.movingRight();\n      if (input.isPressed(32)) gun.fire(bullets);\n    };\n  }\n\n  function loop () {\n    // Завершаем игру\n    if (enemyFleet.y + enemyFleet.h >= screen.h - 32 || !gun.isAlive) {\n      screen.message('GAME OVER', screen.w / 2 - 50);\n      screen.message('YOU SCORE ' + gun.score, screen.w / 2 - 50, screen.h/2 + 50);\n      return 'finish';\n    }\n\n    \n\n\n\n    // новый раунд\n    if (!enemyFleet.ships.length) {\n      round += 1;\n      step = 0;\n\n      enemyFleet = new EnemyFleet(ctx, EnemyFleet.makeLines(ctx, ENEMY_SPRITERS, round, 10));\n      gun.x = (screen.w - 22) / 2;\n      gun.y = screen.h - 32 - 16 - 4;\n      bullets = [];\n      screen.clearAll();\n      screen.drawBar(gun);\n      gun.draw();\n      shield1.draw();\n      shield2.draw();\n      shield3.draw();\n      shield4.draw();\n    }\n\n    if (step === 0) screen.message(`ROUND  ${round}`, screen.w / 2 - 30);\n\n    if (step === 20) screen.clear(screen.w / 2 - 30, screen.h / 2 - 8, screen.w, 16);\n    // Задержка для показа сообщений\n    if (step > 20) {\n      // обрабатываем команды игрока\n      commandController();\n      // Обрабатываем пули\n      bullets.forEach(function (bullet, i) {\n        // Двигаем пулю\n        bullet.step();\n\n        if (bullet.isHitShield(shield1)\n        || bullet.isHitShield(shield2)\n        || bullet.isHitShield(shield3)\n        || bullet.isHitShield(shield4))\n        {\n          bullets.splice(i, 1);\n        }\n\n        // Если пуля попала в цель, очищаем ее и больше не отслеживаем\n        if (bullet.isHit(bullet.type === 'gun' ? enemyFleet.ships : [gun], gun)) {\n          bullets.splice(i, 1);\n        } else {\n          // Удаляем улетевшие пули\n          if (bullet.y > screen.h - 32 - bullet.h - 2 || bullet.y < 0) {\n            bullets.splice(i, 1);\n          }\n        }\n\n       \n      });\n\n      // TODO при уменьшении количества кораблей уменьшать задержку хода флота\n      if ((step - 20) % enemyFleet.stepGap === 0) {\n        enemyFleet.step();\n        enemyFleet.fire(bullets);\n      }\n      screen.clearAll();\n      screen.drawAll(gun, bullets, enemyFleet, step, shield1, shield2, shield3, shield4);\n    }\n\n    step += 1;\n    requestAnimationFrame(loop);\n  }\n\n  return loop;\n}\n\n// Инициализируем экран\nlet screen = new Screen(ctx);\nscreen.clearAll();\nscreen.message('PRESS ANY KEY', screen.w / 2 - 100);\n// Готовимся получать команды от игрока\nlet input = new InputHandler();\n\nsetTimeout(function wait () {\n  if (input.isAnyKeyPressed()) {\n    screen.clearAll();\n\n    var gameLoop = startGameLoop(screen, input);\n    // запускаем игровой цикл\n    gameLoop();\n  } else setTimeout(wait, 0);\n}, 0);\n"]}